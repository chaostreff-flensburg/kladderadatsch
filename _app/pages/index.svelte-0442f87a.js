import{S as ee,i as te,s as ae,e as k,t as B,k as U,c as $,a as w,h as A,d as c,m as j,b as I,g as P,G as u,T as X,j as C,q as S,w as L,x as F,y as G,K as re,a3 as q,P as Q,o as O,B as M,n as W,p as Z,Q as ie,a0 as be,l as oe,N as _e,ac as fe,v as pe,M as le,ad as ve,Z as ke,ae as $e,af as we,ag as De,ah as Ee,ai as Ie,aj as xe,a4 as z,ak as ye,al as Te,am as Se}from"../chunks/vendor-b7bc0d3d.js";import{s as ge}from"../chunks/store-0551302c.js";function Y(o){return new Date(o).valueOf()}function ue(o){let a,e,r,l,i=o[2].title+"",f,n,t,s,b,d,v,x,V,D,T,m,N;function _(E,H){return E[2].lastDone?Ne:Ve}let p=_(o),y=p(o),h=o[2].streak&&ce(o),g=o[1]&&de(o);return{c(){a=k("div"),e=k("div"),r=k("div"),l=k("div"),f=B(i),n=U(),t=k("div"),y.c(),s=U(),h&&h.c(),b=U(),d=k("div"),v=U(),x=k("button"),V=B("\u25CF"),D=U(),g&&g.c(),this.h()},l(E){a=$(E,"DIV",{class:!0});var H=w(a);e=$(H,"DIV",{class:!0});var R=w(e);r=$(R,"DIV",{class:!0});var J=w(r);l=$(J,"DIV",{class:!0});var ne=w(l);f=A(ne,i),ne.forEach(c),n=j(J),t=$(J,"DIV",{class:!0});var K=w(t);y.l(K),s=j(K),h&&h.l(K),K.forEach(c),J.forEach(c),b=j(R),d=$(R,"DIV",{class:!0}),w(d).forEach(c),v=j(R),x=$(R,"BUTTON",{class:!0});var se=w(x);V=A(se,"\u25CF"),se.forEach(c),R.forEach(c),D=j(H),g&&g.l(H),H.forEach(c),this.h()},h(){I(l,"class","text-xl font-semibold"),I(t,"class","flex justify-between text-sm font-light text-slate-500 dark:text-slate-400"),I(r,"class","grow cursor-pointer p-4"),I(d,"class","h-12 self-center justify-self-end border-r-2"),I(x,"class","p-4"),I(e,"class","flex"),I(a,"class","mb-2 w-full max-w-lg divide-y-2 divide-neutral-100 overflow-hidden rounded-md bg-white shadow-md dark:divide-neutral-700 dark:bg-neutral-800")},m(E,H){P(E,a,H),u(a,e),u(e,r),u(r,l),u(l,f),u(r,n),u(r,t),y.m(t,null),u(t,s),h&&h.m(t,null),u(e,b),u(e,d),u(e,v),u(e,x),u(x,V),u(a,D),g&&g.m(a,null),T=!0,m||(N=[X(r,"click",o[4]),X(x,"click",o[5])],m=!0)},p(E,H){(!T||H&4)&&i!==(i=E[2].title+"")&&C(f,i),p===(p=_(E))&&y?y.p(E,H):(y.d(1),y=p(E),y&&(y.c(),y.m(t,s))),E[2].streak?h?(h.p(E,H),H&4&&S(h,1)):(h=ce(E),h.c(),S(h,1),h.m(t,null)):h&&(W(),O(h,1,1,()=>{h=null}),Z()),E[1]?g?(g.p(E,H),H&2&&S(g,1)):(g=de(E),g.c(),S(g,1),g.m(a,null)):g&&(W(),O(g,1,1,()=>{g=null}),Z())},i(E){T||(S(h),S(g),T=!0)},o(E){O(h),O(g),T=!1},d(E){E&&c(a),y.d(),h&&h.d(),g&&g.d(),m=!1,be(N)}}}function Ve(o){let a;return{c(){a=k("span")},l(e){a=$(e,"SPAN",{}),w(a).forEach(c)},m(e,r){P(e,a,r)},p:le,d(e){e&&c(a)}}}function Ne(o){let a,e;return{c(){a=k("span"),e=B(o[3])},l(r){a=$(r,"SPAN",{});var l=w(a);e=A(l,o[3]),l.forEach(c)},m(r,l){P(r,a,l),u(a,e)},p(r,l){l&8&&C(e,r[3])},d(r){r&&c(a)}}}function ce(o){let a,e=o[2].streak+"",r,l,i,f;return l=new ve({props:{class:"mt-[0.5px] ml-px h-4 w-4"}}),{c(){a=k("span"),r=B(e),L(l.$$.fragment),this.h()},l(n){a=$(n,"SPAN",{class:!0});var t=w(a);r=A(t,e),F(l.$$.fragment,t),t.forEach(c),this.h()},h(){I(a,"class","flex")},m(n,t){P(n,a,t),u(a,r),G(l,a,null),f=!0},p(n,t){(!f||t&4)&&e!==(e=n[2].streak+"")&&C(r,e)},i(n){f||(S(l.$$.fragment,n),re(()=>{i||(i=q(a,Q,{},!0)),i.run(1)}),f=!0)},o(n){O(l.$$.fragment,n),i||(i=q(a,Q,{},!1)),i.run(0),f=!1},d(n){n&&c(a),M(l),n&&i&&i.end()}}}function de(o){let a,e,r=(o[2].interval/36e5).toFixed(2)+"",l,i,f,n,t,s=o[2].preferedTime+"",b,d,v,x,V,D,T,m,N;return f=new ke({props:{class:"-mt-1 inline h-5"}}),d=new $e({props:{class:"mb-1 inline h-5"}}),V=new we({}),{c(){a=k("div"),e=k("div"),l=B(r),i=B(" h"),L(f.$$.fragment),n=U(),t=k("div"),b=B(s),L(d.$$.fragment),v=U(),x=k("button"),L(V.$$.fragment),this.h()},l(_){a=$(_,"DIV",{class:!0});var p=w(a);e=$(p,"DIV",{class:!0});var y=w(e);l=A(y,r),i=A(y," h"),F(f.$$.fragment,y),y.forEach(c),n=j(p),t=$(p,"DIV",{class:!0});var h=w(t);b=A(h,s),F(d.$$.fragment,h),h.forEach(c),v=j(p),x=$(p,"BUTTON",{class:!0});var g=w(x);F(V.$$.fragment,g),g.forEach(c),p.forEach(c),this.h()},h(){I(e,"class","col-start-2 text-right"),I(t,"class","col-start-2 mt-2 hidden text-right"),I(x,"class","mt-2 w-fit rounded-md bg-red-600 p-2 px-4 text-white"),I(a,"class","grid grid-cols-2 p-4")},m(_,p){P(_,a,p),u(a,e),u(e,l),u(e,i),G(f,e,null),u(a,n),u(a,t),u(t,b),G(d,t,null),u(a,v),u(a,x),G(V,x,null),T=!0,m||(N=X(x,"click",o[6]),m=!0)},p(_,p){(!T||p&4)&&r!==(r=(_[2].interval/36e5).toFixed(2)+"")&&C(l,r),(!T||p&4)&&s!==(s=_[2].preferedTime+"")&&C(b,s)},i(_){T||(S(f.$$.fragment,_),S(d.$$.fragment,_),S(V.$$.fragment,_),re(()=>{D||(D=q(a,ie,{},!0)),D.run(1)}),T=!0)},o(_){O(f.$$.fragment,_),O(d.$$.fragment,_),O(V.$$.fragment,_),D||(D=q(a,ie,{},!1)),D.run(0),T=!1},d(_){_&&c(a),M(f),M(d),M(V),_&&D&&D.end(),m=!1,N()}}}function He(o){let a,e,r=!o[0]&&ue(o);return{c(){r&&r.c(),a=oe()},l(l){r&&r.l(l),a=oe()},m(l,i){r&&r.m(l,i),P(l,a,i),e=!0},p(l,[i]){l[0]?r&&(W(),O(r,1,1,()=>{r=null}),Z()):r?(r.p(l,i),i&1&&S(r,1)):(r=ue(l),r.c(),S(r,1),r.m(a.parentNode,a))},i(l){e||(S(r),e=!0)},o(l){O(r),e=!1},d(l){r&&r.d(l),l&&c(a)}}}function Oe(o,a,e){let r;_e(o,ge,v=>e(8,r=v));let{_id:l}=a,i=!1,f=!1;function n(){e(1,f=!f)}let t=r.habits[r.habits.findIndex(v=>v._id===l)],s=fe(t.lastDone);pe(()=>{let v=setInterval(()=>{e(3,s=fe(t.lastDone)),Date.now()-Y(t.lastDone)>t.interval&&e(2,t.streak=0,t)},6e4);return()=>{clearInterval(v)}});function b(){Date.now()-Y(t.lastDone)<=t.interval?e(2,t.streak++,t):e(2,t.streak=1,t),e(2,t.lastDone=new Date().toISOString(),t)}function d(){e(0,i=!0),r.habits.splice(r.habits.findIndex(v=>v._id===t._id),1)}return o.$$set=v=>{"_id"in v&&e(7,l=v._id)},[i,f,t,s,n,b,d,l]}class Be extends ee{constructor(a){super();te(this,a,Oe,He,ae,{_id:7})}}function he(o,a,e){const r=o.slice();return r[5]=a[e],r}function me(o,a){let e,r,l,i,f,n=le,t;return r=new Be({props:{_id:a[5]._id}}),{key:o,first:null,c(){e=k("li"),L(r.$$.fragment),l=U(),this.h()},l(s){e=$(s,"LI",{class:!0});var b=w(e);F(r.$$.fragment,b),l=j(b),b.forEach(c),this.h()},h(){I(e,"class","flex w-full justify-center"),this.first=e},m(s,b){P(s,e,b),G(r,e,null),u(e,l),t=!0},p(s,b){a=s;const d={};b&1&&(d._id=a[5]._id),r.$set(d)},r(){f=e.getBoundingClientRect()},f(){De(e),n(),Ee(e,f)},a(){n(),n=Ie(e,f,ye,{easing:z})},i(s){t||(S(r.$$.fragment,s),re(()=>{i||(i=q(e,Q,{intro:!0,easing:z},!0)),i.run(1)}),t=!0)},o(s){O(r.$$.fragment,s),i||(i=q(e,Q,{intro:!0,easing:z},!1)),i.run(0),t=!1},d(s){s&&c(e),M(r),s&&i&&i.end()}}}function Ae(o){let a,e=[],r=new Map,l,i=o[0];const f=n=>n[5]._id;for(let n=0;n<i.length;n+=1){let t=he(o,i,n),s=f(t);r.set(s,e[n]=me(s,t))}return{c(){a=k("ul");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){a=$(n,"UL",{class:!0});var t=w(a);for(let s=0;s<e.length;s+=1)e[s].l(t);t.forEach(c),this.h()},h(){I(a,"class","m-auto flex flex-col items-center p-2")},m(n,t){P(n,a,t);for(let s=0;s<e.length;s+=1)e[s].m(a,null);l=!0},p(n,[t]){if(t&1){i=n[0],W();for(let s=0;s<e.length;s+=1)e[s].r();e=xe(e,t,f,1,n,i,r,a,Te,me,null,he);for(let s=0;s<e.length;s+=1)e[s].a();Z()}},i(n){if(!l){for(let t=0;t<i.length;t+=1)S(e[t]);l=!0}},o(n){for(let t=0;t<e.length;t+=1)O(e[t]);l=!1},d(n){n&&c(a);for(let t=0;t<e.length;t+=1)e[t].d()}}}function Ue(o,a,e){let r,l;_e(o,ge,t=>e(1,l=t)),pe(()=>{let t=setInterval(()=>{i()},6e4);return()=>{clearInterval(t)}});function i(){return e(0,r=[...l.habits.toJSON()]),r.forEach((t,s)=>{e(0,r[s].weight=f(t),r)}),r.sort((t,s)=>!t.lastDone||t.weight>=s.weight?-1:1)}function f(t){return n(t)}function n(t){return(Date.now()-Y(t.lastDone))/t.interval*100}return o.$$.update=()=>{o.$$.dirty&2&&e(0,r=i(l.habits.toJSON()))},[r,l]}class je extends ee{constructor(a){super();te(this,a,Ue,Ae,ae,{})}}function Pe(o){let a,e,r,l,i,f,n,t,s,b,d,v,x,V,D,T;return r=new Se({props:{class:"mb-1 mr-2 inline h-8 text-red-500"}}),D=new je({}),{c(){a=k("div"),e=k("h1"),L(r.$$.fragment),l=B(`Unstable
    Software!`),i=U(),f=k("p"),n=B(`This app is in development. Things will change and break, features are
    missing and `),t=k("b"),s=B("data entered may be lost"),b=B(`. Bug reports and feedback are
    welcome at
    `),d=k("a"),v=B("our GitHub repo"),x=B("."),V=U(),L(D.$$.fragment),this.h()},l(m){a=$(m,"DIV",{class:!0});var N=w(a);e=$(N,"H1",{class:!0});var _=w(e);F(r.$$.fragment,_),l=A(_,`Unstable
    Software!`),_.forEach(c),i=j(N),f=$(N,"P",{class:!0});var p=w(f);n=A(p,`This app is in development. Things will change and break, features are
    missing and `),t=$(p,"B",{});var y=w(t);s=A(y,"data entered may be lost"),y.forEach(c),b=A(p,`. Bug reports and feedback are
    welcome at
    `),d=$(p,"A",{href:!0,target:!0,class:!0});var h=w(d);v=A(h,"our GitHub repo"),h.forEach(c),x=A(p,"."),p.forEach(c),N.forEach(c),V=j(m),F(D.$$.fragment,m),this.h()},h(){I(e,"class","text-lg font-medium"),I(d,"href","http://github.com/chaostreff-flensburg/kladderadatsch"),I(d,"target","_blank"),I(d,"class","text-sky-500"),I(f,"class","text-xs"),I(a,"class","m-auto mb-2 w-full max-w-lg rounded-md border border-red-500 p-4 font-mono")},m(m,N){P(m,a,N),u(a,e),G(r,e,null),u(e,l),u(a,i),u(a,f),u(f,n),u(f,t),u(t,s),u(f,b),u(f,d),u(d,v),u(f,x),P(m,V,N),G(D,m,N),T=!0},p:le,i(m){T||(S(r.$$.fragment,m),S(D.$$.fragment,m),T=!0)},o(m){O(r.$$.fragment,m),O(D.$$.fragment,m),T=!1},d(m){m&&c(a),M(r),m&&c(V),M(D,m)}}}class Ge extends ee{constructor(a){super();te(this,a,null,Pe,ae,{})}}export{Ge as default};
